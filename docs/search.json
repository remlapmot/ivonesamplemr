[
  {
    "objectID": "ivtsps-examples.html",
    "href": "ivtsps-examples.html",
    "title": "Two-stage predictor substitution estimators",
    "section": "",
    "text": "Read in binary outcome data; y outcome, x exposure, w covariate, z* instrumental variables (genotypes).\n\nuse ivbinoutdata, clear\n\nFit the model with a single instrumental variable.\n\nivtsps y (x = z1)\n\nFinal GMM criterion Q(b) = 1.76e-32\n\nnote: model is exactly identified.\n\nGMM estimation \n\nNumber of parameters =   4\nNumber of moments    =   4\nInitial weight matrix: Unadjusted                 Number of obs   =      2,500\n\n------------------------------------------------------------------------------\n             |               Robust\n             | Coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n    /s1xb_z1 |   .9318626   .0711029    13.11   0.000     .7925034    1.071222\n         /a0 |   1.456817   .0466934    31.20   0.000       1.3653    1.548335\n         /b1 |   .1433391   .0139152    10.30   0.000     .1160658    .1706123\n         /b0 |   .2817003   .0268135    10.51   0.000     .2291468    .3342537\n------------------------------------------------------------------------------\nInstruments for equation 1: z1 _cons\nInstruments for equation 2: predicted _cons\n\nCausal risk difference for: b1\n\n ( 1)  [b1]_cons = 0\n\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   .1433391   .0139152    10.30   0.000     .1160658    .1706123\n------------------------------------------------------------------------------\n\n\nFit the model with multiple instruments.\n\nivtsps y (x = z1 z2 z3)\n\nFinal GMM criterion Q(b) = 6.65e-33\n\nnote: model is exactly identified.\n\nGMM estimation \n\nNumber of parameters =   6\nNumber of moments    =   6\nInitial weight matrix: Unadjusted                 Number of obs   =      2,500\n\n------------------------------------------------------------------------------\n             |               Robust\n             | Coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n    /s1xb_z1 |   .9945859   .0614877    16.18   0.000     .8740722      1.1151\n    /s1xb_z2 |   .9540576   .0525572    18.15   0.000     .8510474    1.057068\n    /s1xb_z3 |   .9554229   .0495052    19.30   0.000     .8583944    1.052451\n         /a0 |   .0842244   .0675928     1.25   0.213    -.0482551    .2167039\n         /b1 |   .1307856   .0067841    19.28   0.000     .1174891    .1440822\n         /b0 |   .3046021   .0148061    20.57   0.000     .2755826    .3336216\n------------------------------------------------------------------------------\nInstruments for equation 1: z1 z2 z3 _cons\nInstruments for equation 2: predicted _cons\n\nCausal risk difference for: b1\n\n ( 1)  [b1]_cons = 0\n\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   .1307856   .0067841    19.28   0.000     .1174891    .1440822\n------------------------------------------------------------------------------\n\n\nFit the model with multiple instruments, and adjusting for w.\n\nivtsps y w (x = z1 z2 z3)\n\nFinal GMM criterion Q(b) = 1.27e-32\n\nnote: model is exactly identified.\n\nGMM estimation \n\nNumber of parameters =   8\nNumber of moments    =   8\nInitial weight matrix: Unadjusted                 Number of obs   =      2,500\n\n------------------------------------------------------------------------------\n             |               Robust\n             | Coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n    /s1xb_z1 |   .9882395   .0505573    19.55   0.000     .8891491     1.08733\n    /s1xb_z2 |   .9152859   .0431149    21.23   0.000     .8307823    .9997895\n    /s1xb_z3 |    .954388   .0404106    23.62   0.000     .8751847    1.033591\n     /s1xb_w |   .9801363    .027334    35.86   0.000     .9265627     1.03371\n         /a0 |   .0734396   .0541988     1.36   0.175    -.0327882    .1796673\n         /b1 |    .129698    .006901    18.79   0.000     .1161722    .1432237\n /s2exogxb_w |   .0638726   .0103505     6.17   0.000     .0435859    .0841593\n         /b0 |   .3041477   .0145428    20.91   0.000     .2756443    .3326511\n------------------------------------------------------------------------------\nInstruments for equation 1: z1 z2 z3 w _cons\nInstruments for equation 2: predicted w _cons\n\nCausal risk difference for: b1\n\n ( 1)  [b1]_cons = 0\n\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |    .129698    .006901    18.79   0.000     .1161722    .1432237\n------------------------------------------------------------------------------\n\n\nUsing the log additive link function.\n\nivtsps y (x = z1 z2 z3), link(logadd)\n\nFinal GMM criterion Q(b) = 8.95e-33\n\nnote: model is exactly identified.\n\nGMM estimation \n\nNumber of parameters =   6\nNumber of moments    =   6\nInitial weight matrix: Unadjusted                 Number of obs   =      2,500\n\n------------------------------------------------------------------------------\n             |               Robust\n             | Coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n    /s1xb_z1 |   .9945859   .0614877    16.18   0.000     .8740722      1.1151\n    /s1xb_z2 |   .9540576   .0525572    18.15   0.000     .8510474    1.057068\n    /s1xb_z3 |   .9554229   .0495052    19.30   0.000     .8583944    1.052451\n         /a0 |   .0842244   .0675928     1.25   0.213    -.0482551    .2167039\n         /b1 |   .2309625   .0125342    18.43   0.000      .206396     .255529\n         /b0 |  -1.061422   .0336872   -31.51   0.000    -1.127447    -.995396\n------------------------------------------------------------------------------\nInstruments for equation 1: z1 z2 z3 _cons\nInstruments for equation 2: predicted _cons\n\nCausal risk ratio for: b1\n\n ( 1)  [b1]_cons = 0\n\n------------------------------------------------------------------------------\n             |     exp(b)   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   1.259812   .0157907    18.43   0.000      1.22924    1.291145\n------------------------------------------------------------------------------\n\n\nUsing the log multiplicative link function.\n\nivtsps y (x = z1 z2 z3), link(logmult)\n\nFinal GMM criterion Q(b) = 1.10e-32\n\nnote: model is exactly identified.\n\nGMM estimation \n\nNumber of parameters =   6\nNumber of moments    =   6\nInitial weight matrix: Unadjusted                 Number of obs   =      2,500\n\n------------------------------------------------------------------------------\n             |               Robust\n             | Coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n    /s1xb_z1 |   .9945859   .0614877    16.18   0.000     .8740722      1.1151\n    /s1xb_z2 |   .9540576   .0525572    18.15   0.000     .8510474    1.057068\n    /s1xb_z3 |   .9554229   .0495052    19.30   0.000     .8583944    1.052451\n         /a0 |   .0842244   .0675928     1.25   0.213    -.0482551    .2167039\n         /b1 |   .2410471   .0158072    15.25   0.000     .2100656    .2720286\n         /b0 |  -1.081193   .0390212   -27.71   0.000    -1.157673   -1.004713\n------------------------------------------------------------------------------\nInstruments for equation 1: z1 z2 z3 _cons\nInstruments for equation 2: predicted _cons\n\nCausal risk ratio for: b1\n\n ( 1)  [b1]_cons = 0\n\n------------------------------------------------------------------------------\n             |     exp(b)   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   1.272581   .0201159    15.25   0.000     1.233759    1.312625\n------------------------------------------------------------------------------\n\n\nUsing the logit link function.\n\nivtsps y (x = z1 z2 z3), link(logit)\n\nFinal GMM criterion Q(b) = 6.69e-33\n\nnote: model is exactly identified.\n\nGMM estimation \n\nNumber of parameters =   6\nNumber of moments    =   6\nInitial weight matrix: Unadjusted                 Number of obs   =      2,500\n\n------------------------------------------------------------------------------\n             |               Robust\n             | Coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n    /s1xb_z1 |   .9945859   .0614877    16.18   0.000     .8740722      1.1151\n    /s1xb_z2 |   .9540576   .0525572    18.15   0.000     .8510474    1.057068\n    /s1xb_z3 |   .9554229   .0495052    19.30   0.000     .8583944    1.052451\n         /a0 |   .0842244   .0675928     1.25   0.213    -.0482551    .2167039\n         /b1 |   .5731411   .0351357    16.31   0.000     .5042763    .6420059\n         /b0 |  -.8527558   .0687178   -12.41   0.000    -.9874403   -.7180713\n------------------------------------------------------------------------------\nInstruments for equation 1: z1 z2 z3 _cons\nInstruments for equation 2: predicted _cons\n\nCausal odds ratio for: b1\n\n ( 1)  [b1]_cons = 0\n\n------------------------------------------------------------------------------\n             |     exp(b)   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |    1.77383   .0623248    16.31   0.000     1.655787    1.900289\n------------------------------------------------------------------------------\n\n\nBootstrap standard errors.\n\nbootstrap, reps(250) nodots: ivtsps y (x = z1 z2 z3), estonly\n\n             |   Observed   Bootstrap                         Normal-based\n           y | coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n   predicted |   .1307856   .0064668    20.22   0.000     .1181109    .1434604\n       _cons |   .3046021   .0147641    20.63   0.000      .275665    .3335392\n------------------------------------------------------------------------------"
  },
  {
    "objectID": "ivmsmm-examples.html",
    "href": "ivmsmm-examples.html",
    "title": "Multiplicative structural mean model",
    "section": "",
    "text": "Read in binary outcome data; y outcome, x exposure, w covariate, z* instrumental variables (genotypes).\n\nuse ivbinoutdata, clear\n\nFit the model with a single instrumental variable.\n\nivmsmm y (x = z1)\n\nFinal GMM criterion Q(b) = 4.78e-34\n\nnote: model is exactly identified.\n\nExponential mean model with endogenous regressors\n\nNumber of parameters =   2                         Number of obs  =      2,500\nNumber of moments    =   2\nInitial weight matrix: Unadjusted\nGMM weight matrix:     Robust\n\n------------------------------------------------------------------------------\n             |               Robust\n           y |        IRR   std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n           x |   1.481751   .1140179     5.11   0.000     1.274315    1.722953\n       _cons |   .1934525   .0344643    -9.22   0.000     .1364362    .2742957\n------------------------------------------------------------------------------\nNote: _cons estimates baseline incidence rate.\nEndogenous: x\nExogenous:  z1\n\n\nFit the model with multiple instruments.\n\nivmsmm y (x = z1 z2 z3)\nestat overid\n\nFinal GMM criterion Q(b) = .0005389\n\nExponential mean model with endogenous regressors\n\nNumber of parameters =   2                         Number of obs  =      2,500\nNumber of moments    =   4\nInitial weight matrix: Unadjusted\nGMM weight matrix:     Robust\n\n------------------------------------------------------------------------------\n             |               Robust\n           y |        IRR   std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n           x |   1.457696   .0555919     9.88   0.000     1.352711     1.57083\n       _cons |   .2007564   .0195625   -16.48   0.000     .1658536    .2430044\n------------------------------------------------------------------------------\nNote: _cons estimates baseline incidence rate.\nEndogenous: x\nExogenous:  z1 z2 z3\n\n\n  Test of overidentifying restriction:\n\n  Hansen's J chi2(2) = 1.34718 (p = 0.5099)\n\n\nAdjusting for w.\n\nivmsmm y w (x = z1 z2 z3)\n\nFinal GMM criterion Q(b) = .0005056\n\nExponential mean model with endogenous regressors\n\nNumber of parameters =   3                         Number of obs  =      2,500\nNumber of moments    =   5\nInitial weight matrix: Unadjusted\nGMM weight matrix:     Robust\n\n------------------------------------------------------------------------------\n             |               Robust\n           y |        IRR   std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n           x |   1.560802    .066842    10.40   0.000     1.435142    1.697465\n           w |   1.257379   .0453377     6.35   0.000     1.171586    1.349455\n       _cons |   .1674455   .0170897   -17.51   0.000     .1370878    .2045257\n------------------------------------------------------------------------------\nNote: _cons estimates baseline incidence rate.\nEndogenous: x\nExogenous:  w z1 z2 z3\n\n\nFit the model with multiple exposures, and instruments, and adjusting for w.\n\nivmsmm y w (x1 x2 = z1 z2 z3)\nestat overid\n\nFinal GMM criterion Q(b) = 2.37e-06\n\nExponential mean model with endogenous regressors\n\nNumber of parameters =   4                         Number of obs  =      2,500\nNumber of moments    =   5\nInitial weight matrix: Unadjusted\nGMM weight matrix:     Robust\n\n------------------------------------------------------------------------------\n             |               Robust\n           y |        IRR   std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n          x1 |   1.517255   .0745502     8.48   0.000     1.377954    1.670637\n          x2 |   1.057035   .0518303     1.13   0.258     .9601786    1.163662\n           w |   1.302055   .0622329     5.52   0.000     1.185619    1.429925\n       _cons |   .1640391   .0169551   -17.49   0.000     .1339575    .2008759\n------------------------------------------------------------------------------\nNote: _cons estimates baseline incidence rate.\nEndogenous: x1 x2\nExogenous:  w z1 z2 z3\n\n\n  Test of overidentifying restriction:\n\n  Hansen's J chi2(1) = .005935 (p = 0.9386)\n\n\nComparison with ivpois (specify onestep option to ivmsmm/ivpoisson for equivalence).\n\nivpois y, endog(x) exog(z1) eform(RR)\n\n           y |         RR   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\ny            |\n           x |   1.481748   .1140173     5.11   0.000     1.274313    1.722949\n       _cons |   .1934532   .0344643    -9.22   0.000     .1364368    .2742965\n------------------------------------------------------------------------------\n\n\n\nivpois y, endog(x) exog(z1 z2 z3) eform(RR)\n\n           y |         RR   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\ny            |\n           x |   1.455861   .0554883     9.85   0.000     1.351069    1.568781\n       _cons |   .2014477   .0196368   -16.44   0.000     .1664136    .2438574\n------------------------------------------------------------------------------\n\n\n\nivpois y w, endog(x) exog(z1 z2 z3) eform(RR)\n\n           y |         RR   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\ny            |\n           w |   1.256041    .045248     6.33   0.000     1.170415    1.347931\n           x |   1.557702   .0665613    10.37   0.000     1.432558    1.693779\n       _cons |   .1683465    .017178   -17.46   0.000     .1378313    .2056176\n------------------------------------------------------------------------------\n\n\n\nivpois y w, endog(x1 x2) exog(z1 z2 z3) eform(RR)\n\n           y |         RR   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\ny            |\n           w |   1.301945   .0622521     5.52   0.000     1.185476    1.429857\n          x1 |   1.517616   .0747339     8.47   0.000     1.377987    1.671394\n          x2 |   1.056735   .0519727     1.12   0.262      .959626    1.163671\n       _cons |   .1640171   .0169575   -17.49   0.000     .1339321      .20086\n------------------------------------------------------------------------------"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "ivonesamplemr",
    "section": "",
    "text": "This is the website for the ivonesamplemr Stata package.\nThe GitHub repository is here.\nIt is maintained by Tom Palmer."
  },
  {
    "objectID": "ivlsmm-examples.html",
    "href": "ivlsmm-examples.html",
    "title": "Logistic structural mean model",
    "section": "",
    "text": "Read in binary outcome data; y outcome, x exposure, w covariate, z* instrumental variables (genotypes).\n\nuse ivbinoutdata, clear\n\nFit the model with a single instrumental variable.\n\nivlsmm y (x = z1)\n\nFinal GMM criterion Q(b) = 2.37e-30\n\nnote: model is exactly identified.\n\nGMM estimation \n\nNumber of parameters =   5\nNumber of moments    =   5\nInitial weight matrix: Unadjusted                 Number of obs   =      2,500\nGMM weight matrix:     Robust\n\n------------------------------------------------------------------------------\n             |               Robust\n             | Coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       /xb_x |   1.375182   .0563156    24.42   0.000     1.264805    1.485558\n      /xb_z1 |  -.1698859   .1079229    -1.57   0.115    -.3814109    .0416391\n         /b0 |  -2.076602   .1038597   -19.99   0.000    -2.280163   -1.873041\n     /cmxb_x |   1.196517   .1133081    10.56   0.000     .9744374    1.418597\n        /ey0 |   .1448039   .0310372     4.67   0.000     .0839722    .2056356\n------------------------------------------------------------------------------\nInstruments for equation 1: x z1 _cons\nInstruments for equation 2: z1 _cons\n\n  Test of overidentifying restriction:\n\n  Hansen's J chi2(0) = 5.9e-27 (p =     .)\n\nNote: test cannot be performed because there are no\n      overidentifying restrictions.\n\nCausal odds ratio for: x\n\n ( 1)  [cmxb_x]_cons = 0\n\n------------------------------------------------------------------------------\n             |     exp(b)   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   3.308574   .3748881    10.56   0.000     2.649676     4.13132\n------------------------------------------------------------------------------\n\n\nFit the model with multiple instruments.\n\nivlsmm y (x = z1 z2 z3)\n\nFinal GMM criterion Q(b) = .0007498\n\nGMM estimation \n\nNumber of parameters =   7\nNumber of moments    =   9\nInitial weight matrix: Unadjusted                 Number of obs   =      2,500\nGMM weight matrix:     Robust\n\n------------------------------------------------------------------------------\n             |               Robust\n             | Coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       /xb_x |   1.497546   .0629276    23.80   0.000     1.374211    1.620882\n      /xb_z1 |  -.3828314   .0697615    -5.49   0.000    -.5195614   -.2461015\n      /xb_z2 |   -.361644   .0634738    -5.70   0.000    -.4860504   -.2372376\n      /xb_z3 |  -.3727515   .0639573    -5.83   0.000    -.4981055   -.2473976\n         /b0 |  -1.692298   .1204232   -14.05   0.000    -1.928323   -1.456273\n     /cmxb_x |   1.113372   .0673101    16.54   0.000     .9814465    1.245297\n        /ey0 |   .1778203   .0213404     8.33   0.000     .1359939    .2196468\n------------------------------------------------------------------------------\nInstruments for equation 1: x z1 z2 z3 _cons\nInstruments for equation 2: z1 z2 z3 _cons\n\n  Test of overidentifying restriction:\n\n  Hansen's J chi2(2) = 1.87445 (p = 0.3917)\n\nCausal odds ratio for: x\n\n ( 1)  [cmxb_x]_cons = 0\n\n------------------------------------------------------------------------------\n             |     exp(b)   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   3.044607   .2049329    16.54   0.000     2.668313    3.473968\n------------------------------------------------------------------------------\n\n\nFit the model with multiple exposures, and instruments, and adjusting for w.\n\nivlsmm y w (x1 x2 = z1 z2 z3)\n\nFinal GMM criterion Q(b) = .0006646\n\nGMM estimation \n\nNumber of parameters =  11\nNumber of moments    =  12\nInitial weight matrix: Unadjusted                 Number of obs   =      2,500\nGMM weight matrix:     Robust\n\n------------------------------------------------------------------------------\n             |               Robust\n             | Coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n      /xb_x1 |   1.270939   .0709528    17.91   0.000     1.131875    1.410004\n      /xb_x2 |   .7280662   .0577047    12.62   0.000     .6149671    .8411654\n      /xb_z1 |  -.6069302   .0915561    -6.63   0.000    -.7863769   -.4274835\n      /xb_z2 |  -.6409243   .0906894    -7.07   0.000    -.8186723   -.4631763\n      /xb_z3 |  -.0478545   .0956419    -0.50   0.617    -.2353092    .1396002\n       /xb_w |   .6417589   .0844396     7.60   0.000     .4762603    .8072576\n         /b0 |  -1.973388   .1356534   -14.55   0.000    -2.239264   -1.707512\n    /cmxb_x1 |   1.193709   .1028285    11.61   0.000     .9921685    1.395249\n    /cmxb_x2 |   .1719145   .1120826     1.53   0.125    -.0477634    .3915923\n     /cmxb_w |   .7090571     .11249     6.30   0.000     .4885808    .9295334\n        /ey0 |   .1486804   .0181689     8.18   0.000     .1130701    .1842907\n------------------------------------------------------------------------------\nInstruments for equation 1: x1 x2 z1 z2 z3 w _cons\nInstruments for equation 2: z1 z2 z3 w _cons\n\n  Test of overidentifying restriction:\n\n  Hansen's J chi2(1) = 1.66158 (p = 0.1974)\n\nCausal odds ratio for: x1\n\n ( 1)  [cmxb_x1]_cons = 0\n\n------------------------------------------------------------------------------\n             |     exp(b)   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   3.299294   .3392614    11.61   0.000     2.697077    4.035978\n------------------------------------------------------------------------------\n\nCausal odds ratio for: x2\n\n ( 1)  [cmxb_x2]_cons = 0\n\n------------------------------------------------------------------------------\n             |     exp(b)   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   1.187576   .1331066     1.53   0.125     .9533594    1.479334\n------------------------------------------------------------------------------\n\nCausal odds ratio for: w\n\n ( 1)  [cmxb_w]_cons = 0\n\n------------------------------------------------------------------------------\n             |     exp(b)   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   2.032074    .228588     6.30   0.000     1.630001    2.533327\n------------------------------------------------------------------------------"
  },
  {
    "objectID": "ivxtile-examples.html",
    "href": "ivxtile-examples.html",
    "title": "Quantile estimator",
    "section": "",
    "text": "Read in simulated data with different outcome-exposure relationships; y# outcome, x exposure, g instrumental variable (genotype).\n\nuse ../data/ivmwdata, clear\n\nPlot outcome-exposure relationships\n\ntwoway line y1 x, sort(x)\n\n\n\n\n\n\n\n\n\n\n\ntwoway line y2 y3 y4 x, sort(x) legend(pos(6) rows(1))\n\n\n\n\n\n\n\n\n\n\n\ntwoway line y5 x, sort(x)\n\n\n\n\n\n\n\n\n\n\nUse with different iv commands.\n\nivxtile, nq(5) par(x): ivregress 2sls y2 (x = g)\nqui gr export ./img/ivxtile-plot-01.svg, replace\n\n    quantile       beta         se   medendog      lowci      uppci  \n           1   .1311195   .0015519   .6070275   .1280778   .1341611  \n           2   .2131875   .0009425   .9969859   .2113403   .2150348  \n           3   .2827527    .001016   1.343214   .2807613   .2847441  \n           4   .3815383   .0015779   1.825639   .3784456    .384631  \n           5   .6742788    .054497   2.897407   .5674646   .7810929  \n\n\n\n\n\n\n\n\n\n\n\n\nivxtile, nq(10) par(b1): ivtsps y2 (x = g)\nqui gr export ./img/ivxtile-plot-02.svg, replace\n\n    quantile       beta         se   medendog      lowci      uppci  \n           1   .1037679   .0021337   .4384223   .0995859   .1079499  \n           2   .1585745   .0015963   .7513582   .1554457   .1617032  \n           3   .1981476   .0015735   .9798349   .1950635   .2012317  \n           4   .2285919   .0015923   1.016022    .225471   .2317128  \n           5    .263626   .0014932   1.178039   .2606993   .2665527  \n           6   .3018492   .0016141   1.401061   .2986855   .3050129  \n           7   .3490515   .0019169   1.642947   .3452945   .3528085  \n           8   .4143449   .0022951   1.994051   .4098466   .4188433  \n           9   .5128626   .0030473   2.466335   .5068899   .5188352  \n          10   .8345693   .0691984   3.577371   .6989404   .9701982  \n\n\n\n\n\n\n\n\n\n\n\nSome binary outcome examples.\n\nuse ../data/ivbinoutdata, clear\n\n\nivxtile, nq(5) par(b1): ivtsps y (x = z1 z2 z3), link(logadd)\nqui gr export ./img/ivxtile-plot-03.svg, replace\n\n    quantile       beta         se    medendog      lowci      uppci  \n           1   .8962642   .0908862   -.5241845   .7181272   1.074401  \n           2   .5585964   .0441663    .8047578   .4720304   .6451625  \n           3   .3532819   .0297168    1.851269   .2950371   .4115268  \n           4   .1504481   .0224022    2.627049   .1065397   .1943565  \n           5   .0427768   .0098807    4.113728   .0234107    .062143  \n\n\n\n\n\n\n\n\n\n\n\n\nivxtile, nq(5) par(b1): ivtsps y (x = z1 z2 z3), link(logmult)\nivxtile, nq(5) par(b1): ivtsps y (x = z1 z2 z3), link(logit)\nivxtile, nq(5) par(b1): ivtsri y (x = z1 z2 z3), link(logadd)\nivxtile, nq(5) par(b1): ivtsri y (x = z1 z2 z3), link(logmult)\nivxtile, nq(5) par(b1): ivtsri y (x = z1 z2 z3), link(logit)\nivxtile, nq(5) par(x): ivlsmm y (x = z1 z2 z3)\nivxtile, nq(5) par(x): ivmsmm y (x = z1 z2 z3)\n\nSave the dataset of results.\n\nivxtile, nq(10) par(x) saving(ivxtileres): ivreg2 y2 (x = g)"
  },
  {
    "objectID": "ivmw-examples.html",
    "href": "ivmw-examples.html",
    "title": "Moving window estimator",
    "section": "",
    "text": "Read in simulated data with different outcome-exposure relationships; y# outcome, x exposure, g instrumental variable (genotype).\n\nuse ../data/ivmwdata, clear\n\nPlot outcome-exposure relationships\n\ntwoway line y1 x, sort(x)\nqui gr export ./img/ivmw-plot-01.svg, replace\n\n\n\n\n\n\n\n\n\n\n\ntwoway line y2 y3 y4 x, sort(x) legend(pos(6) rows(1))\nqui gr export ./img/ivmw-plot-02.svg, replace\n\n\n\n\n\n\n\n\n\n\n\ntwoway line y5 x, sort(x)\nqui gr export ./img/ivmw-plot-03.svg, replace\n\n\n\n\n\n\n\n\n\n\nExample moving window fits.\n\nivmw, window(3950) par(x) nodots: ivreg2 y1 (x = g)\nqui gr export ./img/ivmw-plot-04.svg, replace\n\nTime variable: res_order, 1 to 4000\n        Delta: 1 unit\nfile /var/folders/1l/w0qjrymd3hb44s3skrzn4w4w0000gn/T//S_62404.000001 saved as .dta format\n(rolling: ivreg2)\n\n\n\n\n\n\n\n\n\n\n\n\nivmw, window(3950) par(x) nodots: ivreg2 y2 (x = g)\nqui gr export ./img/ivmw-plot-05.svg, replace\n\nTime variable: res_order, 1 to 4000\n        Delta: 1 unit\nfile /var/folders/1l/w0qjrymd3hb44s3skrzn4w4w0000gn/T//S_62412.000001 saved as .dta format\n(rolling: ivreg2)\n\n\n\n\n\n\n\n\n\n\n\n\nivmw, window(3950) par(x) nodots: ivreg2 y3 (x = g)\nqui gr export ./img/ivmw-plot-06.svg, replace\n\nTime variable: res_order, 1 to 4000\n        Delta: 1 unit\nfile /var/folders/1l/w0qjrymd3hb44s3skrzn4w4w0000gn/T//S_62421.000001 saved as .dta format\n(rolling: ivreg2)\n\n\n\n\n\n\n\n\n\n\n\n\nivmw, window(3950) par(x) nodots: ivreg2 y4 (x = g)\nqui gr export ./img/ivmw-plot-07.svg, replace\n\nTime variable: res_order, 1 to 4000\n        Delta: 1 unit\nfile /var/folders/1l/w0qjrymd3hb44s3skrzn4w4w0000gn/T//S_62429.000001 saved as .dta format\n(rolling: ivreg2)\n\n\n\n\n\n\n\n\n\n\n\n\nivmw, window(3950) par(x) nodots: ivreg2 y5 (x = g)\nqui gr export ./img/ivmw-plot-08.svg, replace\n\nTime variable: res_order, 1 to 4000\n        Delta: 1 unit\nfile /var/folders/1l/w0qjrymd3hb44s3skrzn4w4w0000gn/T//S_62437.000001 saved as .dta format\n(rolling: ivreg2)\n\n\n\n\n\n\n\n\n\n\n\nChange window size (e.g. for outcome y2).\n\nivmw, window(3750) par(x): ivreg2 y2 (x = g)\nivmw, window(3000) par(x): ivreg2 y2 (x = g)\nivmw, window(2000) par(x): ivreg2 y2 (x = g)\nivmw, window(1000) par(x): ivreg2 y2 (x = g)\n\nSave the moving window dataset.\n\nivmw, window(3950) par(x) saving(ivmw): ivreg2 y2 (x = g)\n\nUse different iv commands.\n\nivmw, window(3950) par(x): ivregress 2sls y (x = z1 z2 z3)\nivmw, window(3950) par(x): ivregress liml y (x = z1 z2 z3)\nivmw, window(3950) par(x): ivregress gmm y (x = z1 z2 z3)\nivmw, window(3950) par(x): ivlsmm y (x = z1 z2 z3)\nivmw, window(3950) par(x): ivmsmm y (x = z1 z2 z3)\nivmw, window(3950) par(b1): ivtsps y (x = z1 z2 z3)\nivmw, window(3950) par(b1): ivtsps y (x = z1 z2 z3), link(logadd)\nivmw, window(3950) par(b1): ivtsps y (x = z1 z2 z3), link(logmult)\nivmw, window(3950) par(b1): ivtsps y (x = z1 z2 z3), link(logit)\nivmw, window(3950) par(b1): ivtsri y (x = z1 z2 z3)\nivmw, window(3950) par(b1): ivtsri y (x = z1 z2 z3), link(logadd)\nivmw, window(3950) par(b1): ivtsri y (x = z1 z2 z3), link(logmult)\nivmw, window(3950) par(b1): ivtsri y (x = z1 z2 z3), link(logit)"
  },
  {
    "objectID": "ivasmm-examples.html",
    "href": "ivasmm-examples.html",
    "title": "Additive structural mean model",
    "section": "",
    "text": "Read in binary outcome data; y outcome, x exposure, w covariate, z* instrumental variables (genotypes).\n\nuse ivbinoutdata, clear\n\nFit the model with a single instrumental variable.\n\nivregress 2sls y (x = z1)\n\nInstrumental-variables 2SLS regression            Number of obs   =      2,500\n                                                  Wald chi2(1)    =     100.20\n                                                  Prob &gt; chi2     =     0.0000\n                                                  R-squared       =     0.4338\n                                                  Root MSE        =     .37484\n\n------------------------------------------------------------------------------\n           y | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n           x |   .1433391   .0143193    10.01   0.000     .1152738    .1714043\n       _cons |   .2817003   .0271777    10.37   0.000      .228433    .3349676\n------------------------------------------------------------------------------\nEndogenous: x\nExogenous:  z1\n\n\n\nivreg2 y (x = z1)\n\nIV (2SLS) estimation\n--------------------\n\nEstimates efficient for homoskedasticity only\nStatistics consistent for homoskedasticity only\n\n                                                      Number of obs =     2500\n                                                      F(  1,  2498) =   100.12\n                                                      Prob &gt; F      =   0.0000\nTotal (centered) SS     =     620.3344                Centered R2   =   0.4338\nTotal (uncentered) SS   =         1358                Uncentered R2 =   0.7413\nResidual SS             =   351.260716                Root MSE      =    .3748\n\n------------------------------------------------------------------------------\n           y | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n           x |   .1433391   .0143193    10.01   0.000     .1152738    .1714043\n       _cons |   .2817003   .0271777    10.37   0.000      .228433    .3349676\n------------------------------------------------------------------------------\nUnderidentification test (Anderson canon. corr. LM statistic):         171.159\n                                                   Chi-sq(1) P-val =    0.0000\n------------------------------------------------------------------------------\nWeak identification test (Cragg-Donald Wald F statistic):              183.591\nStock-Yogo weak ID test critical values: 10% maximal IV size             16.38\n                                         15% maximal IV size              8.96\n                                         20% maximal IV size              6.66\n                                         25% maximal IV size              5.53\nSource: Stock-Yogo (2005).  Reproduced by permission.\n------------------------------------------------------------------------------\nSargan statistic (overidentification test of all instruments):           0.000\n                                                 (equation exactly identified)\n------------------------------------------------------------------------------\nInstrumented:         x\nExcluded instruments: z1\n------------------------------------------------------------------------------\n\n\nFit the model with multiple instruments.\n\nivregress 2sls y (x = z1 z2 z3)\n\nInstrumental-variables 2SLS regression            Number of obs   =      2,500\n                                                  Wald chi2(1)    =     323.89\n                                                  Prob &gt; chi2     =     0.0000\n                                                  R-squared       =     0.4223\n                                                  Root MSE        =     .37863\n\n------------------------------------------------------------------------------\n           y | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n           x |   .1307856   .0072671    18.00   0.000     .1165423    .1450289\n       _cons |   .3046021    .015268    19.95   0.000     .2746774    .3345267\n------------------------------------------------------------------------------\nEndogenous: x\nExogenous:  z1 z2 z3\n\n\n\nivreg2 y (x = z1 z2 z3)\n\nIV (2SLS) estimation\n--------------------\n\nEstimates efficient for homoskedasticity only\nStatistics consistent for homoskedasticity only\n\n                                                      Number of obs =     2500\n                                                      F(  1,  2498) =   323.63\n                                                      Prob &gt; F      =   0.0000\nTotal (centered) SS     =     620.3344                Centered R2   =   0.4223\nTotal (uncentered) SS   =         1358                Uncentered R2 =   0.7361\nResidual SS             =  358.3930269                Root MSE      =    .3786\n\n------------------------------------------------------------------------------\n           y | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n           x |   .1307856   .0072671    18.00   0.000     .1165423    .1450289\n       _cons |   .3046021    .015268    19.95   0.000     .2746774    .3345267\n------------------------------------------------------------------------------\nUnderidentification test (Anderson canon. corr. LM statistic):         678.024\n                                                   Chi-sq(3) P-val =    0.0000\n------------------------------------------------------------------------------\nWeak identification test (Cragg-Donald Wald F statistic):              309.618\nStock-Yogo weak ID test critical values:  5% maximal IV relative bias    13.91\n                                         10% maximal IV relative bias     9.08\n                                         20% maximal IV relative bias     6.46\n                                         30% maximal IV relative bias     5.39\n                                         10% maximal IV size             22.30\n                                         15% maximal IV size             12.83\n                                         20% maximal IV size              9.54\n                                         25% maximal IV size              7.80\nSource: Stock-Yogo (2005).  Reproduced by permission.\n------------------------------------------------------------------------------\nSargan statistic (overidentification test of all instruments):           1.662\n                                                   Chi-sq(2) P-val =    0.4357\n------------------------------------------------------------------------------\nInstrumented:         x\nExcluded instruments: z1 z2 z3\n------------------------------------------------------------------------------\n\n\nFit the model with multiple exposures, and instruments, and adjusting for w.\n\nivregress 2sls y w (x1 x2 = z1 z2 z3)\n\nInstrumental-variables 2SLS regression            Number of obs   =      2,500\n                                                  Wald chi2(3)    =    1010.76\n                                                  Prob &gt; chi2     =     0.0000\n                                                  R-squared       =     0.4481\n                                                  Root MSE        =     .37006\n\n------------------------------------------------------------------------------\n           y | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n          x1 |   .1212489   .0108116    11.21   0.000     .1000585    .1424392\n          x2 |   .0142141   .0135397     1.05   0.294    -.0123231    .0407513\n           w |   .0721392   .0129687     5.56   0.000     .0467211    .0975573\n       _cons |   .3056947    .014944    20.46   0.000     .2764051    .3349843\n------------------------------------------------------------------------------\nEndogenous: x1 x2\nExogenous:  w z1 z2 z3\n\n\n\nivreg2 y w (x1 x2 = z1 z2 z3)\n\nIV (2SLS) estimation\n--------------------\n\nEstimates efficient for homoskedasticity only\nStatistics consistent for homoskedasticity only\n\n                                                      Number of obs =     2500\n                                                      F(  3,  2496) =   336.38\n                                                      Prob &gt; F      =   0.0000\nTotal (centered) SS     =     620.3344                Centered R2   =   0.4481\nTotal (uncentered) SS   =         1358                Uncentered R2 =   0.7479\nResidual SS             =  342.3610763                Root MSE      =    .3701\n\n------------------------------------------------------------------------------\n           y | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n          x1 |   .1212489   .0108116    11.21   0.000     .1000585    .1424392\n          x2 |   .0142141   .0135397     1.05   0.294    -.0123231    .0407513\n           w |   .0721392   .0129687     5.56   0.000     .0467211    .0975573\n       _cons |   .3056947    .014944    20.46   0.000     .2764051    .3349843\n------------------------------------------------------------------------------\nUnderidentification test (Anderson canon. corr. LM statistic):         413.984\n                                                   Chi-sq(2) P-val =    0.0000\n------------------------------------------------------------------------------\nWeak identification test (Cragg-Donald Wald F statistic):              165.050\nStock-Yogo weak ID test critical values: 10% maximal IV size             13.43\n                                         15% maximal IV size              8.18\n                                         20% maximal IV size              6.40\n                                         25% maximal IV size              5.45\nSource: Stock-Yogo (2005).  Reproduced by permission.\n------------------------------------------------------------------------------\nSargan statistic (overidentification test of all instruments):           0.523\n                                                   Chi-sq(1) P-val =    0.4696\n------------------------------------------------------------------------------\nInstrumented:         x1 x2\nIncluded instruments: w\nExcluded instruments: z1 z2 z3\n------------------------------------------------------------------------------"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "ivonesamplemr Stata package",
    "section": "",
    "text": "One-sample Mendelian randomization (MR) / instrumental variable (IV) analyses in Stata.\n\nLatest updates\nDescription\nInstallation\n\n\n\n\nSeptember 2025:\n\nReran certification scripts under StataNow 19.5\n\nMay 2025:\n\nReran certification scripts under StataNow 18.5\n\nJuly 2024:\n\nAmend legend position in ivmw and ivxtile to use the 6 o’clock position as per in Stata 17 and earlier\n\nJanuary 2024:\n\nReran certification scripts under Stata 18.0\n\nAugust 2023:\n\nAdded a record of the Stata version in the certification scripts\n\nApril 2023:\n\nThe images in the package website now have accompanying alt text descriptions\nChecked the certification scripts run under the latest Stata 17.0\nRewrote the website using Quarto\n\nFebruary 2023:\n\nUpdated the R Markdown code generating the website to use the CRAN version of the Statamarkdown package\n\nNovember 2022:\n\nFor an example Mendelian randomization analysis using ivonesamplemr please see Madley-Dowd et al., Maternal vitamin D during pregnancy and offspring autism and autism-associated traits: a prospective cohort study, Molecular Autism, 2022, here\n\nFebruary 2022:\n\nRan cscripts under Stata 17.0\nivonesamplemr now has a website https://remlapmot.github.io/ivonesamplemr/\n\n\n\n\n\nThe package includes implementations of:\n\nadditive structural mean model: see help ivasmm\nlogistic structural mean model: see help ivlsmm\nmultiplicative structural mean model: see help ivmsmm\ntwo-stage predictor substitution estimators: see ivtsps\ntwo-stage residual inclusion estimators: see help ivtsri\nmoving window (a.k.a. sliding/rolling window) versions of these estimators: see help ivmw\nperforming estimation within quantiles of the first stage residuals: see help ivxtile\n\nThe ivtsps and ivtsri commands implement the following link functions for the second stage model:\n\nidentity (i.e. linear regression) - for a binary outcome this estimates a causal risk difference\nlogadd (log additive, i.e. Poisson/log-binomial regression) and logmult (log multiplicative, i.e. gamma regression) - for a binary outcome these estimate a causal risk ratio\nlogit (i.e. logistic regression) - for a binary outcome this estimates a causal odds ratio\n\n\n\n\nInstall the ivonesamplemr package within Stata using\nnet install github, from(\"https://haghish.github.io/github/\")\ngithub install remlapmot/ivonesamplemr\nOr use the following code\nnet install ivonesamplemr, from(\"https://raw.github.com/remlapmot/ivonesamplemr/main/\") replace\ndo \"https://raw.github.com/remlapmot/ivonesamplemr/main/dependency.do\"\nLaunch the main package helpfile with\nhelp ivonesamplemr\nTo check for an update to the package run within Stata\nadoupdate ivonesamplemr, update\nUninstall the package within Stata using\nado uninstall ivonesamplemr"
  },
  {
    "objectID": "index.html#latest-updates",
    "href": "index.html#latest-updates",
    "title": "ivonesamplemr Stata package",
    "section": "",
    "text": "September 2025:\n\nReran certification scripts under StataNow 19.5\n\nMay 2025:\n\nReran certification scripts under StataNow 18.5\n\nJuly 2024:\n\nAmend legend position in ivmw and ivxtile to use the 6 o’clock position as per in Stata 17 and earlier\n\nJanuary 2024:\n\nReran certification scripts under Stata 18.0\n\nAugust 2023:\n\nAdded a record of the Stata version in the certification scripts\n\nApril 2023:\n\nThe images in the package website now have accompanying alt text descriptions\nChecked the certification scripts run under the latest Stata 17.0\nRewrote the website using Quarto\n\nFebruary 2023:\n\nUpdated the R Markdown code generating the website to use the CRAN version of the Statamarkdown package\n\nNovember 2022:\n\nFor an example Mendelian randomization analysis using ivonesamplemr please see Madley-Dowd et al., Maternal vitamin D during pregnancy and offspring autism and autism-associated traits: a prospective cohort study, Molecular Autism, 2022, here\n\nFebruary 2022:\n\nRan cscripts under Stata 17.0\nivonesamplemr now has a website https://remlapmot.github.io/ivonesamplemr/"
  },
  {
    "objectID": "index.html#description",
    "href": "index.html#description",
    "title": "ivonesamplemr Stata package",
    "section": "",
    "text": "The package includes implementations of:\n\nadditive structural mean model: see help ivasmm\nlogistic structural mean model: see help ivlsmm\nmultiplicative structural mean model: see help ivmsmm\ntwo-stage predictor substitution estimators: see ivtsps\ntwo-stage residual inclusion estimators: see help ivtsri\nmoving window (a.k.a. sliding/rolling window) versions of these estimators: see help ivmw\nperforming estimation within quantiles of the first stage residuals: see help ivxtile\n\nThe ivtsps and ivtsri commands implement the following link functions for the second stage model:\n\nidentity (i.e. linear regression) - for a binary outcome this estimates a causal risk difference\nlogadd (log additive, i.e. Poisson/log-binomial regression) and logmult (log multiplicative, i.e. gamma regression) - for a binary outcome these estimate a causal risk ratio\nlogit (i.e. logistic regression) - for a binary outcome this estimates a causal odds ratio"
  },
  {
    "objectID": "index.html#installation",
    "href": "index.html#installation",
    "title": "ivonesamplemr Stata package",
    "section": "",
    "text": "Install the ivonesamplemr package within Stata using\nnet install github, from(\"https://haghish.github.io/github/\")\ngithub install remlapmot/ivonesamplemr\nOr use the following code\nnet install ivonesamplemr, from(\"https://raw.github.com/remlapmot/ivonesamplemr/main/\") replace\ndo \"https://raw.github.com/remlapmot/ivonesamplemr/main/dependency.do\"\nLaunch the main package helpfile with\nhelp ivonesamplemr\nTo check for an update to the package run within Stata\nadoupdate ivonesamplemr, update\nUninstall the package within Stata using\nado uninstall ivonesamplemr"
  },
  {
    "objectID": "ivtsri-examples.html",
    "href": "ivtsri-examples.html",
    "title": "Two-stage residual inclusion estimators",
    "section": "",
    "text": "Read in binary outcome data; y outcome, x exposure, w covariate, z* instrumental variables (genotypes).\n\nuse ivbinoutdata, clear\n\nFit the model with a single instrumental variable.\n\nivtsri y (x = z1)\n\nFinal GMM criterion Q(b) = 1.38e-32\n\nnote: model is exactly identified.\n\nGMM estimation \n\nNumber of parameters =   5\nNumber of moments    =   5\nInitial weight matrix: Unadjusted                 Number of obs   =      2,500\n\n------------------------------------------------------------------------------\n             |               Robust\n             | Coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n    /s1xb_z1 |   .9318626   .0711029    13.11   0.000     .7925034    1.071222\n         /a0 |   1.456817   .0466934    31.20   0.000       1.3653    1.548335\n         /b1 |   .1433391   .0139152    10.30   0.000     .1160658    .1706123\n         /b2 |   .0237303   .0146168     1.62   0.104    -.0049182    .0523787\n         /b0 |   .2817003   .0268135    10.51   0.000     .2291468    .3342537\n------------------------------------------------------------------------------\nInstruments for equation 1: z1 _cons\nInstruments for equation 2: x residuals _cons\n\nCausal risk difference for: b1\n\n ( 1)  [b1]_cons = 0\n\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   .1433391   .0139152    10.30   0.000     .1160658    .1706123\n------------------------------------------------------------------------------\n\nCausal risk difference for: b2\n\n ( 1)  [b2]_cons = 0\n\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   .0237303   .0146168     1.62   0.104    -.0049182    .0523787\n------------------------------------------------------------------------------\n\n\nFit the model with multiple instruments.\n\nivtsri y (x = z1 z2 z3)\n\nFinal GMM criterion Q(b) = 7.38e-33\n\nnote: model is exactly identified.\n\nGMM estimation \n\nNumber of parameters =   7\nNumber of moments    =   7\nInitial weight matrix: Unadjusted                 Number of obs   =      2,500\n\n------------------------------------------------------------------------------\n             |               Robust\n             | Coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n    /s1xb_z1 |   .9945859   .0614877    16.18   0.000     .8740722      1.1151\n    /s1xb_z2 |   .9540576   .0525572    18.15   0.000     .8510474    1.057068\n    /s1xb_z3 |   .9554229   .0495052    19.30   0.000     .8583944    1.052451\n         /a0 |   .0842244   .0675928     1.25   0.213    -.0482551    .2167039\n         /b1 |   .1307856   .0067841    19.28   0.000     .1174891    .1440822\n         /b2 |    .047557   .0084484     5.63   0.000     .0309984    .0641155\n         /b0 |   .3046021   .0148061    20.57   0.000     .2755826    .3336216\n------------------------------------------------------------------------------\nInstruments for equation 1: z1 z2 z3 _cons\nInstruments for equation 2: x residuals _cons\n\nCausal risk difference for: b1\n\n ( 1)  [b1]_cons = 0\n\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   .1307856   .0067841    19.28   0.000     .1174891    .1440822\n------------------------------------------------------------------------------\n\nCausal risk difference for: b2\n\n ( 1)  [b2]_cons = 0\n\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |    .047557   .0084484     5.63   0.000     .0309984    .0641155\n------------------------------------------------------------------------------\n\n\nFit the model with multiple instruments, and adjusting for w.\n\nivtsri y w (x = z1 z2 z3)\n\nFinal GMM criterion Q(b) = 1.31e-32\n\nnote: model is exactly identified.\n\nGMM estimation \n\nNumber of parameters =   9\nNumber of moments    =   9\nInitial weight matrix: Unadjusted                 Number of obs   =      2,500\n\n------------------------------------------------------------------------------\n             |               Robust\n             | Coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n    /s1xb_z1 |   .9882395   .0505573    19.55   0.000     .8891491     1.08733\n    /s1xb_z2 |   .9152859   .0431149    21.23   0.000     .8307823    .9997895\n    /s1xb_z3 |    .954388   .0404106    23.62   0.000     .8751847    1.033591\n     /s1xb_w |   .9801363    .027334    35.86   0.000     .9265627     1.03371\n         /a0 |   .0734396   .0541988     1.36   0.175    -.0327882    .1796673\n         /b1 |    .129698    .006901    18.79   0.000     .1161722    .1432237\n         /b2 |   .0404658    .008937     4.53   0.000     .0229495    .0579821\n /s2exogxb_w |   .0638726   .0103505     6.17   0.000     .0435859    .0841593\n         /b0 |   .3041477   .0145428    20.91   0.000     .2756443    .3326511\n------------------------------------------------------------------------------\nInstruments for equation 1: z1 z2 z3 w _cons\nInstruments for equation 2: x residuals w _cons\n\nCausal risk difference for: b1\n\n ( 1)  [b1]_cons = 0\n\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |    .129698    .006901    18.79   0.000     .1161722    .1432237\n------------------------------------------------------------------------------\n\nCausal risk difference for: b2\n\n ( 1)  [b2]_cons = 0\n\n------------------------------------------------------------------------------\n             | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   .0404658    .008937     4.53   0.000     .0229495    .0579821\n------------------------------------------------------------------------------\n\n\nUsing the log additive link function.\n\nivtsri y (x = z1 z2 z3), link(logadd)\n\nFinal GMM criterion Q(b) = 6.65e-33\n\nnote: model is exactly identified.\n\nGMM estimation \n\nNumber of parameters =   7\nNumber of moments    =   7\nInitial weight matrix: Unadjusted                 Number of obs   =      2,500\n\n------------------------------------------------------------------------------\n             |               Robust\n             | Coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n    /s1xb_z1 |   .9945859   .0614877    16.18   0.000     .8740722      1.1151\n    /s1xb_z2 |   .9540576   .0525572    18.15   0.000     .8510474    1.057068\n    /s1xb_z3 |   .9554229   .0495052    19.30   0.000     .8583944    1.052451\n         /a0 |   .0842244   .0675928     1.25   0.213    -.0482551    .2167039\n         /b1 |   .2246119   .0145109    15.48   0.000     .1961711    .2530527\n         /b2 |   .0995872    .016851     5.91   0.000     .0665599    .1326146\n         /b0 |  -1.203224   .0392053   -30.69   0.000    -1.280065   -1.126383\n------------------------------------------------------------------------------\nInstruments for equation 1: z1 z2 z3 _cons\nInstruments for equation 2: x residuals _cons\n\nCausal risk ratio for: b1\n\n ( 1)  [b1]_cons = 0\n\n------------------------------------------------------------------------------\n             |     exp(b)   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   1.251837   .0181653    15.48   0.000     1.216735    1.287951\n------------------------------------------------------------------------------\n\nCausal risk ratio for: b2\n\n ( 1)  [b2]_cons = 0\n\n------------------------------------------------------------------------------\n             |     exp(b)   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   1.104715   .0186155     5.91   0.000     1.068825     1.14181\n------------------------------------------------------------------------------\n\n\nUsing the log multiplicative link function.\n\nivtsri y (x = z1 z2 z3), link(logmult)\n\nFinal GMM criterion Q(b) = 6.21e-32\n\nnote: model is exactly identified.\n\nGMM estimation \n\nNumber of parameters =   7\nNumber of moments    =   7\nInitial weight matrix: Unadjusted                 Number of obs   =      2,500\n\n------------------------------------------------------------------------------\n             |               Robust\n             | Coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n    /s1xb_z1 |   .9945859   .0614877    16.18   0.000     .8740722      1.1151\n    /s1xb_z2 |   .9540576   .0525572    18.15   0.000     .8510474    1.057068\n    /s1xb_z3 |   .9554229   .0495052    19.30   0.000     .8583944    1.052451\n         /a0 |   .0842244   .0675928     1.25   0.213    -.0482551    .2167039\n         /b1 |   .5193282   .0388913    13.35   0.000     .4431026    .5955538\n         /b2 |   .1793399   .0361099     4.97   0.000     .1085658    .2501141\n         /b0 |  -1.936359   .0941036   -20.58   0.000    -2.120799    -1.75192\n------------------------------------------------------------------------------\nInstruments for equation 1: z1 z2 z3 _cons\nInstruments for equation 2: x residuals _cons\n\nCausal risk ratio for: b1\n\n ( 1)  [b1]_cons = 0\n\n------------------------------------------------------------------------------\n             |     exp(b)   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   1.680898   .0653723    13.35   0.000     1.557532    1.814035\n------------------------------------------------------------------------------\n\nCausal risk ratio for: b2\n\n ( 1)  [b2]_cons = 0\n\n------------------------------------------------------------------------------\n             |     exp(b)   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   1.196427   .0432029     4.97   0.000     1.114678    1.284172\n------------------------------------------------------------------------------\n\n\nUsing the logit link function.\n\nivtsri y (x = z1 z2 z3), link(logit)\n\nFinal GMM criterion Q(b) = 6.75e-33\n\nnote: model is exactly identified.\n\nGMM estimation \n\nNumber of parameters =   7\nNumber of moments    =   7\nInitial weight matrix: Unadjusted                 Number of obs   =      2,500\n\n------------------------------------------------------------------------------\n             |               Robust\n             | Coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n    /s1xb_z1 |   .9945859   .0614877    16.18   0.000     .8740722      1.1151\n    /s1xb_z2 |   .9540576   .0525572    18.15   0.000     .8510474    1.057068\n    /s1xb_z3 |   .9554229   .0495052    19.30   0.000     .8583944    1.052451\n         /a0 |   .0842244   .0675928     1.25   0.213    -.0482551    .2167039\n         /b1 |   1.108148   .0667702    16.60   0.000     .9772804    1.239015\n         /b2 |   .3825741   .0664177     5.76   0.000     .2523978    .5127505\n         /b0 |  -1.654878   .1262212   -13.11   0.000    -1.902267   -1.407489\n------------------------------------------------------------------------------\nInstruments for equation 1: z1 z2 z3 _cons\nInstruments for equation 2: x residuals _cons\n\nCausal odds ratio for: b1\n\n ( 1)  [b1]_cons = 0\n\n------------------------------------------------------------------------------\n             |     exp(b)   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   3.028743   .2022298    16.60   0.000      2.65722    3.452211\n------------------------------------------------------------------------------\n\nCausal odds ratio for: b2\n\n ( 1)  [b2]_cons = 0\n\n------------------------------------------------------------------------------\n             |     exp(b)   Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n         (1) |   1.466054   .0973719     5.76   0.000     1.287108    1.669878\n------------------------------------------------------------------------------\n\n\nBootstrap standard errors.\n\nbootstrap, reps(250) nodots: ivtsri y (x = z1 z2 z3), estonly\n\n             |   Observed   Bootstrap                         Normal-based\n           y | coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n           x |   .1307856   .0064668    20.22   0.000     .1181109    .1434604\n   residuals |    .047557   .0084015     5.66   0.000     .0310903    .0640236\n       _cons |   .3046021   .0147641    20.63   0.000      .275665    .3335392\n------------------------------------------------------------------------------"
  }
]